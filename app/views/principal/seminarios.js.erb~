document.querySelector("#grid-seminarios").innerHTML = "<%= j render partial: 'seminarios' %>";
document.querySelector("#nxt-yr").innerHTML = "< <%= params[:anio] ? params[:anio].to_i + 1 : Sesion.maximum(:fecha_i).year + 1 %>";
document.querySelector("#nxt-yr").setAttribute("href","<%= seminarios_path(anio: (params[:anio] ? params[:anio].to_i + 1 : Sesion.maximum(:fecha_i).year + 1)) %>");
document.querySelector("#lst-yr").innerHTML = "<%= params[:anio] ? params[:anio].to_i - 1 : Sesion.maximum(:fecha_i).year - 1 %> >";
document.querySelector("#lst-yr").setAttribute("href","<%= seminarios_path(anio: (params[:anio] ? params[:anio].to_i - 1 : Sesion.maximum(:fecha_i).year - 1)) %>");
var sems = <%= @sems.to_json.html_safe %>;
console.log(sems);
for(var i = 0; i < sems.length; i++){
	var xhr = new XMLHttpRequest();
	xhr.open("get","https://www.colmex.mx/catalogo_eventos.json?titulo=" + sems[i]["titulo"]);
	xhr.onload = function(){
		if(xhr.status === 200){
			var data = JSON.parse(xhr.response);
			if(data["videos"].length > 0){
				document.querySelector("#img-sem-" + i).setAttribute("data-src",data["videos"][0]["ligaImagen"]);
			}
		}
	};
	xhr.send();
}
/*var xhr = new XMLHttpRequest();
xhr.open("get","https://www.colmex.mx/catalogo_eventos.json?categoria=Seminario sobre Violencia y Paz&ordercrono=desc&anio=<%= params[:anio] ? params[:anio] : '2019' %>");
xhr.onload = function(){
	if(xhr.status === 200){
		var result = JSON.parse(xhr.response);
		var seminarios = "";
		for(var i = 0; i < result["videos"].length; i++){
			seminarios = seminarios + '<div class="seminario uk-text-center">' +
			'<img data-src="' + result["videos"][i]["ligaImagen"] + '" data-width data-height uk-img>' +
			'<a class="boton-seminario" href="#">Más información</a>' +
		'</div>';
		}
		document.querySelector("#grid-seminarios").innerHTML = seminarios;
	}
};
xhr.send();
var xhr1 = new XMLHttpRequest();
xhr1.open("get","https://www.colmex.mx/catalogo_eventos.json?categoria=Seminario sobre Violencia y Paz&ordercrono=desc&anio=<%= params[:anio] ? params[:anio].to_i + 1 : '2020' %>");
xhr1.onload = function(){
	if(xhr1.status === 200){
		var result = JSON.parse(xhr1.response);
		if(result["total"] == 0)
			document.querySelector("#nxt-yr").innerHTML = "";
		else {
			document.querySelector("#nxt-yr").innerHTML = "< <%= params[:anio] ? params[:anio].to_i + 1 : '2020' %>";
			document.querySelector("#nxt-yr").setAttribute("href","<%= seminarios_path(anio: (params[:anio] ? params[:anio].to_i + 1 : '2020')) %>");
		}
	}
};
xhr1.send();
var xhr2 = new XMLHttpRequest();
xhr2.open("get","https://www.colmex.mx/catalogo_eventos.json?categoria=Seminario sobre Violencia y Paz&ordercrono=desc&anio=<%= params[:anio] ? params[:anio].to_i - 1 : '2018' %>");
xhr2.onload = function(){
	if(xhr2.status === 200){
		var result = JSON.parse(xhr2.response);
		if(result["total"] == 0)
			document.querySelector("#lst-yr").innerHTML = "";
		else {
			document.querySelector("#lst-yr").innerHTML = "<%= params[:anio] ? params[:anio].to_i - 1 : '2018' %> >";
			document.querySelector("#lst-yr").setAttribute("href","<%= seminarios_path(anio: (params[:anio] ? params[:anio].to_i - 1 : '2018')) %>");
		}
	}
};
xhr2.send();*/
